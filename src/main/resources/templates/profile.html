<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout.html}">
<div layout:fragment="content">
  <head>
    <link href="css/profile.css" rel="stylesheet" />
  </head>
  <body>
  <div class="container mt-4 custom-container" style="width: 40%">
    <!-- Profile Header -->
    <div class="profile-header d-flex align-items-center mb-4">
      <img
              id="main-avatar"
              src="https://i.pinimg.com/236x/5e/e0/82/5ee082781b8c41406a2a50a0f32d6aa6.jpg"
              class="me-2 rounded-circle" style="width: 100px; height: 100px; object-fit: cover;"
      />
      <div>
        <h3 id="main-name" class="mb-1"></h3>
        <h6 id="main-about" class="text-muted mb-0"></h6>
      </div>
    </div>
    <!-- Sub Navbar -->
    <ul class="nav nav-tabs" id="profileTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button
                class="nav-link active"
                id="timeline-tab"
                data-bs-toggle="tab"
                data-bs-target="#timeline"
                type="button"
                role="tab"
                aria-controls="timeline"
                aria-selected="true"
        >
          Bài viết
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button
                class="nav-link"
                id="friends-tab"
                data-bs-toggle="tab"
                data-bs-target="#friends"
                type="button"
                role="tab"
                aria-controls="friends"
                aria-selected="false"
        >
          Danh sách bạn
        </button>

      </li>
      <li class="nav-item" role="presentation">
        <button
                class="nav-link"
                id="info-tab"
                data-bs-toggle="tab"
                data-bs-target="#info"
                type="button"
                role="tab"
                aria-controls="info"
                aria-selected="false"
        >
          Thông tin cá nhân
        </button>
      </li>
    </ul>

    <div class="tab-content mt-4" id="profileTabsContent">
      <!-- Timeline Tab -->
      <div
              class="tab-pane fade show active"
              id="timeline"
              role="tabpanel"
              aria-labelledby="timeline-tab"
      >
        <div class="post-box mb-4">
          <div class="d-flex align-items-center">
            <img
                    id ="avatar-mini"
                    src=""
                    class="me-2 rounded-circle" style="width: 50px; height: 50px; object-fit: cover;"
            />
            <input
                    type="text"
                    class="form-control"
                    placeholder="Bạn đang nghĩ gì?"
                    data-bs-toggle="modal"
                    data-bs-target="#createPostModal"
            />
          </div>
        </div>
        <div class="post-container">
          <!-- Các bài đăng của người dùng sẽ được hiển thị ở đây -->
        </div>
      </div>

      <!-- Friends Tab -->
      <div
              class="tab-pane fade"
              id="friends"
              role="tabpanel"
              aria-labelledby="friends-tab"
      >
        <div class="card">
          <div class="card-header">
            <strong>Danh sách bạn bè</strong>
          </div>
          <div class="card-body">
            <div id="friendsList">
              <!-- Danh sách bạn bè sẽ được tải động vào đây -->
            </div>
          </div>
        </div>
      </div>


      <!-- Info Tab -->
      <div
              class="tab-pane fade"
              id="info"
              role="tabpanel"
              aria-labelledby="info-tab"
      >
        <div class="card">
          <div class="card-header">
            <strong>Thông tin cá nhân</strong>
          </div>
          <div class="card-body">
            <form id="userForm" enctype="multipart/form-data">
              <div class="mb-3">
                <!-- Avatar Upload -->
                <div class="avatar-container">
                  <div class="avatar-wrapper">
                    <img id="avatarImage" src="https://i.pinimg.com/236x/5e/e0/82/5ee082781b8c41406a2a50a0f32d6aa6.jpg" alt="Avatar" class="avatar-img" />
                    <label for="avatar1" class="avatar-upload-btn">
                      <span class="plus-icon">+</span>
                    </label>
                    <input type="file" class="avatar-input" id="avatar1" accept="image/*" />
                  </div>
                </div>
              </div>
              <!-- Họ -->
              <div class="mb-3">
                <label for="firstname" class="form-label">Họ</label>
                <input type="text" class="form-control" id="firstname" placeholder="Họ" required />
              </div>
              <!-- Tên -->
              <div class="mb-3">
                <label for="lastname" class="form-label">Tên</label>
                <input type="text" class="form-control" id="lastname" placeholder="Tên" required />
              </div>
              <!-- Tiểu sử -->
              <div class="mb-3">
                <label for="about" class="form-label">Tiểu sử</label>
                <textarea class="form-control" id="about" placeholder="Tiểu sử"></textarea>
              </div>
              <!-- Ngày sinh -->
              <div class="mb-3">
                <label for="birthday" class="form-label">Ngày sinh</label>
                <input type="date" class="form-control" id="birthday" />
              </div>
              <!-- Giới tính -->
              <div class="mb-3">
                <label class="form-label">Giới tính</label>
                <div class="form-check form-check-inline">
                  <input type="radio" class="form-check-input" id="genderMale" name="gender" value="Male" />
                  <label class="form-check-label" for="genderMale">Nam</label>
                </div>
                <div class="form-check form-check-inline">
                  <input type="radio" class="form-check-input" id="genderFemale" name="gender" value="Female" />
                  <label class="form-check-label" for="genderFemale">Nữ</label>
                </div>
              </div>

              <!-- Nút lưu -->
              <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
            </form>
          </div>

        </div>
      </div>
    </div>

    <!-- Post Example -->
    <div class="post-container">
      <!-- Posts will be injected here dynamically -->
    </div>
  </div>
  <!-- Create Post Modal -->
  <div class="modal fade " id="createPostModal" tabindex="-1" aria-labelledby="createPostModalLabel" aria-hidden="true">
    <div class="modal-dialog custom-modal ">
      <div class="modal-content mt-10">
        <div class="modal-header">
          <h5 class="modal-title" id="createPostModalLabel">Create Post</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <textarea class="form-control mb-3" id="postContent" rows="4" placeholder="Bạn đang nghĩ gì?"></textarea>

          <!-- Media upload container -->
          <div id="mediaUploadContainer" class="media-upload-container">
            <label for="postMedia" class="media-placeholder">
              <i class="bi bi-camera"></i>
              <span>Thêm ảnh/video</span>
            </label>
            <input class="form-control d-none" type="file" id="postMedia" multiple accept="image/*,video/*" >
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="postSubmitBtn">Post</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal xem ảnh/video chi tiết -->
  <div class="modal fade" id="mediaPreviewModal" tabindex="-1" aria-labelledby="mediaPreviewModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="mediaPreviewModalLabel">Xem chi tiết</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center">
          <div id="mediaPreviewContent"></div>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal Chỉnh Sửa Bài Viết -->

  <div class="modal fade" id="editPostModal" tabindex="-1" aria-labelledby="editPostModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editPostModalLabel">Chỉnh sửa bài viết</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <textarea id="editPostContent" class="form-control mb-3" rows="4" placeholder="Nội dung bài viết"></textarea>
          <input type="hidden" id="editPostId">

          <!-- Media upload container -->
          <div id="editMediaUploadContainer" class="media-upload-container">
            <label for="editPostMedia" class="media-placeholder">
              <i class="bi bi-camera"></i>
              <span>Thêm ảnh/video</span>
            </label>
            <input class="form-control d-none" type="file" id="editPostMedia" multiple accept="image/*,video/*">
          </div>
          <!-- Danh sách media hiện tại -->
          <div id="editCurrentMediaContainer" class="current-media-container mt-2"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
          <button type="button" class="btn btn-primary" id="saveEditPost">Lưu thay đổi</button>
        </div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="js/profile.js"></script>
  <script src="js/post.js"></script>
  </body>
</div>
</html>