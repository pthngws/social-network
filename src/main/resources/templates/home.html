<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout.html}">
<div layout:fragment="content">
<head>
    <link href="css/home.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4 custom-container" style="width: 40%">
        <!-- Create Post Box -->
        <div class="post-box">
            <div class="d-flex align-items-center">
                <img id="avatar-mini" src="" class="me-2 rounded-circle" style="width: 50px; height: 50px; object-fit: cover;">
                <input type="text" class="form-control" placeholder="Bạn đang nghĩ gi?" data-bs-toggle="modal" data-bs-target="#createPostModal">
            </div>
        </div>

        <!-- Post Example -->
        <div class="post-container">
            <!-- Posts will be injected here dynamically -->
        </div>
    </div>

<!-- Create Post Modal -->
<div class="modal fade " id="createPostModal" tabindex="-1" aria-labelledby="createPostModalLabel" aria-hidden="true">
    <div class="modal-dialog custom-modal ">
        <div class="modal-content mt-10">
            <div class="modal-header">
                <h5 class="modal-title" id="createPostModalLabel">Create Post</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <textarea class="form-control mb-3" id="postContent" rows="4" placeholder="Bạn đang nghĩ gì?"></textarea>

                <!-- Media upload container -->
                <div id="mediaUploadContainer" class="media-upload-container">
                    <label for="postMedia" class="media-placeholder">
                        <i class="bi bi-camera"></i>
                        <span>Thêm ảnh/video</span>
                    </label>
                    <input class="form-control d-none" type="file" id="postMedia" multiple accept="image/*,video/*" >
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="postSubmitBtn">Post</button>
            </div>
        </div>
    </div>
</div>
    <!-- Modal xem ảnh/video chi tiết -->
    <div class="modal fade" id="mediaPreviewModal" tabindex="-1" aria-labelledby="mediaPreviewModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="mediaPreviewModalLabel">Xem chi tiết</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <div id="mediaPreviewContent"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Chỉnh Sửa Bài Viết -->
    <div class="modal fade" id="editPostModal" tabindex="-1" aria-labelledby="editPostModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editPostModalLabel">Chỉnh sửa bài viết</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <textarea id="editPostContent" class="form-control mb-3" rows="4" placeholder="Nội dung bài viết"></textarea>
                    <input type="hidden" id="editPostId">

                    <!-- Media upload container -->
                    <div id="editMediaUploadContainer" class="media-upload-container">
                        <label for="editPostMedia" class="media-placeholder">
                            <i class="bi bi-camera"></i>
                            <span>Thêm ảnh/video</span>
                        </label>
                        <input class="form-control d-none" type="file" id="editPostMedia" multiple accept="image/*,video/*">
                    </div>
                    <!-- Danh sách media hiện tại -->
                    <div id="editCurrentMediaContainer" class="current-media-container mt-2"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                    <button type="button" class="btn btn-primary" id="saveEditPost">Lưu thay đổi</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="/js/home.js" ></script>
    <script src="/js/post.js" ></script>
</body>

</div>

</html>
